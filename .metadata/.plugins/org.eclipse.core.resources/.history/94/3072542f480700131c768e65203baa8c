package com.example.android.effectivenavigation;

import java.io.BufferedReader;
import java.io.DataOutputStream;
import java.io.InputStreamReader;
import java.net.Socket;

import com.rabbitmq.client.Channel;
import com.rabbitmq.client.Connection;
import com.rabbitmq.client.ConnectionFactory;

import android.app.Activity;
import android.content.SharedPreferences;
import android.os.AsyncTask;
import android.preference.PreferenceManager;
import android.widget.TextView;
import android.widget.Toast;

public class RabbitHelper extends AsyncTask<Object, Object, String> {
	  
	private TransferData runCommand(Object... commands) {
		

		try {
			
			  ConnectionFactory factory = new ConnectionFactory();
			    factory.setHost("192.168.1.3");
			    Connection connection = factory.newConnection();
			    Channel channel = connection.createChannel();

			    channel.queueDeclare("helloWorld", false, false, false, null);
			    String message = "Hello World!123123";
			    channel.basicPublish("", "helloWorld", null, message.getBytes());
			    System.out.println(" [x] Sent '" + message + "'");
			    
			    channel.close();
			    connection.close();
			
		} catch (Exception ex) {
			
			
		}
		return null;

	}

	

	public void Run() {
		execute();
	}

	@Override
	protected String doInBackground(Object... params) {
		
		runCommand(params);

		return "";
	}

}