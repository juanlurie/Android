package com.example.tcpclient;

import java.io.BufferedReader;
import java.io.DataOutputStream;
import java.io.InputStreamReader;
import java.net.Socket;

import android.os.AsyncTask;
import android.widget.Toast;

public class TcpHelper extends AsyncTask<Object, Object,String> {

	private String runCommand(Object command) {

		try {
			String sentence;
			String modifiedSentence;

			Socket clientSocket = new Socket("192.168.1.3", 13000);
			DataOutputStream outToServer = new DataOutputStream(
					clientSocket.getOutputStream());
			BufferedReader inFromServer = new BufferedReader(
					new InputStreamReader(clientSocket.getInputStream()));
			sentence = command.toString();
			outToServer.writeBytes(sentence + '\n');
			modifiedSentence = inFromServer.readLine();

			clientSocket.close();
			return modifiedSentence;
		} catch (Exception ex) {
			return "Error";
		}

	}

	protected void onPostExecute(String result)
	{
				Toast toast = Toast.makeText(MainActivity.this,result, Toast.LENGTH_LONG);
	    toast.show();
	}

	protected String doInBackground(Object... params) {
		return runCommand(params[0]);

	}
}